function elem(e){return document.getElementById(e)}function hide_div(e){"none"==elem(e).style.display?elem(e).style.display="block":elem(e).style.display="none"}function HideTipId(e){elem(e).style.display="none"}function JastShow(e){elem(e).style.display="block"}function JastShowInline(e){elem(e).style.display="inline"}function JastHide(e){HideTipId(e)}function ResScoreCounter(){res_score>=res_score_final?clearInterval(res_score_count_id):(res_score+=66,res_score<0&&(res_score*=-1),elem("res-score").innerHTML=res_score)}function ResScore(e){if(window.scrollTo(0,0),clearInterval(in_id),"hide"==e)JastHide("result-screen"),JastHide("star_shadow");else if("reset"==e)JastHide("result-screen"),JastHide("star_shadow"),JastHide("star"),JastHide("nostar"),elem("res-star1").style.width="0%",elem("res-star2").style.width="0%",elem("res-star3").style.width="0%",res_score=0,res_score_final=0,clearInterval(res_score_count_id),elem("res-star2").src="images/star_gray.png",elem("res-star3").src="images/star_gray.png",res_star=0;else{q_done=!0,"plus5end"==e?(res_win=0,JastShow("nostar")):3==g_global_rezim?g_wrongs_counter<60?(res_win=1,JastShow("star")):(res_win=0,JastShow("nostar")):g_wrongs_counter<=2?(res_win=1,JastShow("star")):(res_win=0,JastShow("nostar")),JastShow("result-screen"),JastShow("star_shadow");var t=19-time_m,s=60-time_s;if(s<10&&(s="0"+s),19==t&&60==s&&(t=20,s="00"),plus_done&&(t=29-time_m,s=60-time_s),MySocialText="Начинаю изучать экзаменационные билеты ПДД!",res_win){var n=19-time_m,_=60-time_s;for(n=n<10?n/1e3+.1:n/100+.1,_=(g_rights_counter-g_wrongs_counter)/_*100,res_score_final=(g_rights_counter-g_wrongs_counter)/n*6+_,res_star=1,t<10&&(elem("res-star2").src="images/star.png",res_star=2),t<5&&(elem("res-star3").src="images/star.png",res_star=3),1==g_wrongs_counter?(elem("res-star3").src="images/star_gray.png",res_star=2):2==g_wrongs_counter&&(elem("res-star2").src="images/star_gray.png",elem("res-star3").src="images/star_gray.png",res_star=1),1==res_star?elem("stars-bilet-menu").innerHTML="<span class=star-coloured>*</span>**":2==res_star?elem("stars-bilet-menu").innerHTML="<span class=star-coloured>**</span>*":3==res_star&&(elem("stars-bilet-menu").innerHTML="<span class=star-coloured>***</span>"),elem("res-star1").style.width="100%",setTimeout((function(){elem("res-star2").style.width="90%"}),200),setTimeout((function(){elem("res-star3").style.width="100%"}),500),res_score=Math.ceil(res_score_final),i=0;i<10;i++)res_score-=66;res_score_count_id=window.setInterval("ResScoreCounter()",50),MySocialText="Я скоро получу права!"}3==g_global_rezim||2==g_global_rezim||4==g_global_rezim||6==g_global_rezim?(MyTime=time_h_text+""+time_m_text+":"+time_s_text,elem("res-time").innerHTML=MyTime):(t<10&&(t="0"+t),s<10&&(s="0"+s),elem("res-time").innerHTML=t+":"+s,MyTime=t+":"+s),elem("res-wrongs").innerHTML=g_wrongs_counter,MyWrongs=g_wrongs_counter}}var in_id,time_h=0,time_m=19,time_s=60,time_h_text="",time_m_text=0,time_s_text=0;function StartMainTime(){3==g_global_rezim||2==g_global_rezim||4==g_global_rezim||6==g_global_rezim?(++time_s>59&&(time_m++,time_s=0),60==time_m&&(time_h++,time_m=0),time_h>0&&(time_h_text=time_h+":")):--time_s<0&&time_m>0&&(time_m--,time_s=59),time_m_text=time_m<10?"0"+time_m:time_m,time_s_text=time_s<10?"0"+time_s:time_s,0==time_m&&time_s<=0&&3!=g_global_rezim&&2!=g_global_rezim&&4!=g_global_rezim&&6!=g_global_rezim?(document.getElementById("timer").innerHTML="00:00",clearInterval(in_id)):document.getElementById("timer").innerHTML=time_h_text+time_m_text+":"+time_s_text}var chat_active=1,plus_add=0,plus_add_rezim=0;function LoadImage(){if(q_img_l<q_length)for(i=q_img_l;i<q_img_l+2;i++)q_img_l_load[i]=!0,1==q_img[i]?(q_img_src[i]=new Image,q_img_src[i].src=q_img_name[i]):(q_img_src[i]=new Image,q_img_src[i].src="img_pdd/none.jpg");else clearInterval(load_img_id);q_img_l+=2}var plus_done=!1,plus5_active=!1,plus5_toomatchwrongs=!1;function WhoNext(){for(i=0;i<q_length;i++)if(1!=q_nq_done[i]&&2!=q_nq_done[i])return void ShowQuest(i);var e=!1;if(plus_add){for(i=0;i<4;i++)if(q_block_mistake[i]>1){e=!0,q_done=!0,plus5_toomatchwrongs=!0;break}if(!e&&g_wrongs_counter<=2&&g_wrongs_counter>0){plus5_active=!0,JastShow("container-quests-plus5"),JastHide("container-quests");var t=0;for(i=0;i<20;i++)q_nq_done_p5[i]=1;if(q_block_mistake[0]){for(i=0;i<5;i++)q_nq_done_p5[i]=0;for(time_m+=5,JastShowInline("container-plus5-b1"),i=0;i<5;i++)elem("quest-num-p5"+i).innerHTML=i+1;t=1}if(q_block_mistake[1]){for(i=5;i<10;i++)q_nq_done_p5[i]=0;if(time_m+=5,JastShowInline("container-plus5-b2"),t)for(i=0;i<5;i++)elem("quest-num-p5"+(i+5)).innerHTML=i+6;else for(i=0;i<5;i++)elem("quest-num-p5"+(i+5)).innerHTML=i+1;t=1}if(q_block_mistake[2]){for(i=10;i<15;i++)q_nq_done_p5[i]=0;if(time_m+=5,JastShowInline("container-plus5-b3"),t)for(i=0;i<5;i++)elem("quest-num-p5"+(i+10)).innerHTML=i+6;else for(i=0;i<5;i++)elem("quest-num-p5"+(i+10)).innerHTML=i+1;t=1}if(q_block_mistake[3]){for(i=15;i<20;i++)q_nq_done_p5[i]=0;if(time_m+=5,JastShowInline("container-plus5-b4"),t)for(i=0;i<5;i++)elem("quest-num-p5"+(i+15)).innerHTML=i+6;else for(i=0;i<5;i++)elem("quest-num-p5"+(i+15)).innerHTML=i+1}return void WhoNextPlus5()}}if(plus_add)for(i=0;i<20;i++)2==q_nq_done[i]?(elem("quest-num"+i).innerHTML="",elem("quest-num"+i).className="quest-number-red"):1==q_nq_done[i]&&(elem("quest-num"+i).className="quest-number-green");q_done=!0,plus_add_rezim&&plus5_toomatchwrongs||plus_end_mistake?ResScore("plus5end"):ResScore();var s="",n="",_="";for(0!=res_star&&(_="star="+encodeURIComponent(res_star)+"&score="+encodeURIComponent(Math.ceil(res_score_final))+"&"),n=6==g_global_rezim?"dowrongs=1&":1==g_global_rezim||5==g_global_rezim?"updatestat&biletprogress="+encodeURIComponent(q_idb[0])+"&":"",i=0;i<g_wrongs_counter;i++)s=s+g_wrongs[i]+"u";if(s=_+n+"wrongs="+encodeURIComponent(s),g_global_update&&(g_global_update=0),1==g_global_rezim||5==g_global_rezim){0==g_wrongs_counter?"span-bilet-p100":g_wrongs_counter<5?"span-bilet-p75":g_wrongs_counter<10?"span-bilet-p50":g_wrongs_counter<18?"span-bilet-p25":g_wrongs_counter<20&&"span-bilet-p00"}}var answer_once=-1,answer_select=[],ansdch_id=-1,ansdch_a=-1;function Pause(){q_done||(g_pause_active?(clearInterval(in_id),document.getElementById("timer").innerHTML="<span class=pause>ПАУЗА</span>"):(3==g_global_rezim||2==g_global_rezim||4==g_global_rezim||6==g_global_rezim?time_s++:time_s--,StartMainTime(),in_id=window.setInterval("StartMainTime()",1e3)))}function Start(){for(q_block_mistake[0]=0,q_block_mistake[1]=0,q_block_mistake[2]=0,q_block_mistake[3]=0,3==g_global_rezim||2==g_global_rezim||4==g_global_rezim||6==g_global_rezim?(time_m=0,time_s=0):(time_m=19,time_s=60),StartMainTime(),in_id=window.setInterval("StartMainTime()",1e3),ShowQuest(0),LoadImage(),load_img_id=window.setInterval("LoadImage()",2e3),i=0;i<q_length;i++)elem("quest-num"+i).addEventListener("click",ShowQuest.bind(null,i),!1);elem("lines").addEventListener("click",(function(){hide_div("container-menu"),hide_div("box"),HideTipId("tipsmenu"),g_pause_active?g_pause_active=!1:g_pause_active=!0,Pause()}),!1),elem("but-menu").addEventListener("click",(function(){hide_div("container-menu"),hide_div("box"),HideTipId("tipsmenu"),ResScore("hide"),scroll(0,0)}),!1),elem("but-close").addEventListener("click",(function(){ResScore("hide")}),!1),elem("but-repeat").addEventListener("click",(function(){RepeatExam("hide")}),!1),g_registered&&(elem("user-name-text").innerHTML="",JastShow("EnterTextInput"),JastHide("InToChat"),JastHide("NameToChat"))}function RepeatExam(){if(plus5_active=!1,plus_done){for(plus_add=!0,plus5_active=!1,plus_done=!1,i=1;i<=4;i++)JastHide("container-plus5-b"+i);for(JastHide("container-quests-plus5"),i=0;i<q_length;i++)elem("quest-num-p5"+i).innerHTML=i+1,elem("quest-num-p5"+i).className="quest-number",q_nq_done_p5[i]=0;elem("quest-num-p50").className=elem("quest-num-p50").className+" quest-number-active quest-number-p5"}for(q_block_mistake[0]=0,q_block_mistake[1]=0,q_block_mistake[2]=0,q_block_mistake[3]=0,plus5_toomatchwrongs=!1,q_done=!1,ResScore("reset"),g_rights_counter=0,g_wrongs_counter=0,g_global_update=1,i=0;i<q_length;i++)elem("quest-num"+i).innerHTML=i+1,elem("quest-num"+i).className="quest-number",q_nq_done[i]=0;3==g_global_rezim||2==g_global_rezim||4==g_global_rezim||6==g_global_rezim?(time_m=0,time_s=0):(time_m=19,time_s=60),in_id=window.setInterval("StartMainTime()",1e3),ShowQuest(0)}document.onkeydown=function(e){27===(e=e||window.event).keyCode&&(hide_div("container-menu"),hide_div("box"),HideTipId("tipsmenu"),g_pause_active?g_pause_active=!1:g_pause_active=!0,Pause()),49===e.keyCode&&"inputtext"!=document.activeElement.getAttribute("id")&&(plus5_active?DoAnswerPlus5(q_qnum_id_p5,0):DoAnswer(q_qnum_id,0)),50===e.keyCode&&"inputtext"!=document.activeElement.getAttribute("id")&&(plus5_active?DoAnswerPlus5(q_qnum_id_p5,1):DoAnswer(q_qnum_id,1)),51===e.keyCode&&"inputtext"!=document.activeElement.getAttribute("id")&&(plus5_active?DoAnswerPlus5(q_qnum_id_p5,2):DoAnswer(q_qnum_id,2)),52===e.keyCode&&"inputtext"!=document.activeElement.getAttribute("id")&&(plus5_active?DoAnswerPlus5(q_qnum_id_p5,3):DoAnswer(q_qnum_id,3)),13===e.keyCode&&chat_active&&"inputtext"==document.activeElement.getAttribute("id")&&console.log("Send Message")},openStuff=function(){var e=["1.html","2.html","3.html","4.html","5.html","6.html","7.html","8.html","9.html","10.html","11.html","12.html","13.html","14.html","15.html","16.html","17.html","19.html","20.html","21.html","22.html","23.html","24.html","25.html","26.html","27.html","28.html","29.html","30.html"],i=Math.random()*e.length,t=e[i=parseInt(i,10)];window.open(t)};